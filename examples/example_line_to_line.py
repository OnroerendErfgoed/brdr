from brdr.enums import SnapStrategy
from brdr.geometry_utils import geom_from_wkt, _snap_line_to_reference

geom_intersection = geom_from_wkt(
    "MULTILINESTRING ((167534.80773247795877978 178010.78456676230416633, 167746.77788233157480136 178178.18956381650059484), (167784.48685777722857893 178261.60638828721130267, 167799.91325682320166379 178344.45186464508878998, 167839.33627660729689524 178354.7361306757084094, 167913.61153127296711318 178282.17492034847964533, 168104.44180095251067542 178335.31029484007740393))"
)
geom_reference = geom_from_wkt(
    "MULTILINESTRING ((167414.02903303946368396 177928.67079148627817631, 167492.63376215813332237 177983.78838690742850304, 167558.36916833347640932 178029.87529793288558722, 167640.74819667509291321 178080.61375721730291843, 167672.49769957343232818 178108.51003478653728962, 167693.6906187126878649 178153.03490898013114929, 167781.48693685728358105 178185.6947013521566987, 167781.46654856609529816 178300.82058922108262777, 167790.42023693799274042 178341.57744575291872025, 167829.34170747688040137 178367.01847962662577629, 167867.61407681275159121 178306.88900588359683752, 167888.83162209004512988 178280.06315207201987505, 167914.69116569712059572 178285.84772012941539288, 168080.04896569045376964 178321.21619278844445944))"
)
geom_snapped = _snap_line_to_reference(
    geom_intersection,
    geom_reference,
    snap_strategy=SnapStrategy.ONLY_VERTICES,
    max_segment_length=2,
    tolerance=500,
)
print(geom_snapped.wkt)
