from brdr.enums import SnapStrategy
from brdr.geometry_utils import geom_from_wkt, snap_geometry_to_reference

geom_intersection = geom_from_wkt(
    "MULTIPOLYGON (((167612.60034897155128419 178051.35028277945821173, 167667.44976779993157834 178091.72554941702401266, 167700.96885708393529058 178143.52777831049752422, 167735.24974385168752633 178177.04686759450123645, 167774.10141552178538404 178193.04461475278367288, 167778.672200424131006 178212.85134932969231158, 167816.76207461050944403 178211.32775436222436838, 167838.85420163860544562 178164.09631037112558261, 167765.72164320078445598 178065.06263748655328527, 167640.78685586946085095 177978.2177243416372221, 167607.26776658545713872 178014.02220607682829723, 167612.60034897155128419 178051.35028277945821173)),((167836.56880918744718656 178346.92770646570716053, 168066.63164927312755026 178351.49849136808188632, 168083.39119391512940638 178317.97940208407817408, 167897.51260788564104587 178269.22436312551144511, 167836.56880918744718656 178346.92770646570716053)))"
    )
geom_reference = geom_from_wkt(
    "MULTILINESTRING ((167414.02903303946368396 177928.67079148627817631, 167492.63376215813332237 177983.78838690742850304, 167558.36916833347640932 178029.87529793288558722, 167640.74819667509291321 178080.61375721730291843, 167672.49769957343232818 178108.51003478653728962, 167693.6906187126878649 178153.03490898013114929, 167781.48693685728358105 178185.6947013521566987, 167781.46654856609529816 178300.82058922108262777, 167790.42023693799274042 178341.57744575291872025, 167829.34170747688040137 178367.01847962662577629, 167867.61407681275159121 178306.88900588359683752, 167888.83162209004512988 178280.06315207201987505, 167914.69116569712059572 178285.84772012941539288, 168080.04896569045376964 178321.21619278844445944))")
geom_snapped = snap_geometry_to_reference(
    geom_intersection,
    geom_reference,
    snap_strategy=SnapStrategy.PREFER_VERTICES,
    max_segment_length=2,
    tolerance=15
)
print(geom_snapped.wkt)
